<!doctype html>
<html class="no-js" lang="">
<head>
  <meta charset="utf-8">
  <title>Data story with flourish</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="description" content="how-to-make-a-story">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <title>Data project: Space debris</title>
  <link rel="stylesheet" href="./styles.css">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro:ital,wght@0,300;0,400;0,500;0,600;0,700;1,200;1,300;1,400;1,500;1,600&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;500;600;700&display=swap" rel="stylesheet">  
  <script>
    //jQuery effect hide-show
    $(document).ready(function(){
      $("#show1").click(function(){
        $("#prova").hide(1000);
      });
      $("#show1").click(function(){
        $("#graphic").show();
      });
    });
    </script>
  <style>
            @import url('https://fonts.googleapis.com/css?family=Open+Sans:300,600');
      *{
        margin:0;
        padding:0;
      }
    html,
    body {
      height: 100%;
      padding: 0;
      scroll-behavior: smooth;
      font-family: 'Poppins', sans-serif;
      color:white;
      background-color: black;
      font-weight: 300;
    }

    .wrapper {
      padding: 96px 0;
    }

    .font-secondary {
      font-family: 'Poppins', sans-serif;
    }

    .text-h1 {
      font-size: 36px;
      line-height: 52px;

      @media (min-width: @screen-sm-min) {
        font-size: 32px;
        line-height: 48px;
      }
    }

    .text-h2 {
      font-size: 32px;
      line-height: 36px;
      font-weight: 500;

      @media (min-width: @screen-sm-min) {
        font-size: 28px;
        line-height: 32px;
      }
    }

    .text-body-1 {
      font-size: 20px;
      font-weight: 400;
      line-height: 32px;

      @media (min-width: @screen-sm-min) {
        font-size: 18px;
        line-height: 28px;
      }
    }

    .text-body-2 {
      font-size: 16px;
      font-weight: 400;
      line-height: 28px;

      @media (min-width: @screen-sm-min) {
        font-size: 14px;
        line-height: 24px;
      }
    }

    .blockquote {
      font-size: 32px;
      font-weight: 700;
      line-height: 36px;
      text-transform: uppercase;
      text-align: center;

      @media (min-width: @screen-sm-min) {
        font-size: 28px;
      }  
    }

    .text-caption {
      font-size: 14px;
      line-height: 22px;

      @media (min-width: @screen-sm-min) {
        font-size: 12px;
        line-height: 18px; 
      }
    }

    a {
      color: #104E8B !important;
      border-bottom: 2px solid #104E8B;
      text-decoration: none;
      word-break: break-word;
    }

    /* Small devices (tablets, 768px and up) */
    /* @media (min-width: @screen-sm-min) { ... } */

    /* Medium devices (desktops, 992px and up) */
    /* @media (min-width: @screen-md-min) { ... } */

    /* Large devices (large desktops, 1200px and up) */
    /* @media (min-width: @screen-lg-min) { ... } */

    #scrolly__section {
      position: relative;
      display: -webkit-box;
      display: -ms-flexbox;
      display: flex;
      /* background-color: #f3f3f3; */
      padding: 1rem;
    }

    #scrolly__section > * {
      -webkit-box-flex: 1;
      -ms-flex: 1;
      flex: 1;
    }

    .scrolly__content {
      position: relative;
      padding: 0 1rem;
      width: 100%;
    }

    .scrolly__chart {
      position: -webkit-sticky;
      position: sticky;
      width: 100%;
      margin: 0;
      -webkit-transform: translate3d(0, 0, 0);
      -moz-transform: translate3d(0, 0, 0);
      transform: translate3d(0, 0, 0);
      z-index: 0;
    }

    .scrolly__chart iframe {
      width: 100%;
      height: 100%;
    }

    .step {
      margin: 0 auto 2rem auto;
      /*border: 2px solid #104E8B; */
      display: flex;
      justify-content: center;
      align-items: start;      
    }

    .step:last-child {
      margin-bottom: 0;
    }

    .text-block.is-active {
      background-color:black;
      color: white;
    }

    .text-block {
      background-color:black;
    }

    .step p {
      text-align: center;
      padding: 1rem;
    }

    iframe {
      border: unset;
    }


    .headline2 {
    text-align:center;
    color: white;
    padding-left:50px;
}
/* per la frase introduttiva */
.title-container{
    position: absolute;
    width: 100%;
    height: auto;
    top: 20%;
    left: 0%;
    transform: translateY(-50%);
}
.scroll-container{
    position: absolute;
    width: 50%;
    height: auto;
    top: 200%;
    left: 0%;
    transform: translateY(-50%);
}

.title{
    color: rgb(231, 231, 231);
    padding: 0 2rem;
}

.title h1{
    text-transform: uppercase;
    font-family: 'Poppins', sans-serif;
    font-weight: 3200;
    font-size: 65px;
    text-align: center;
    margin-top: 2em;
    font-weight:800;
}
.title h3{
    text-transform: uppercase;
    font-family: 'Poppins', sans-serif;
    text-align: center;
    font-size: 25px;
    margin-top: 1.25em;
    font-weight:300;
}

.subtitle{
    text-align: center;
    position: absolute;
    font-family: 'Poppins', sans-serif;
    font-weight: 400;
    color: white;
    width: 85%;
    margin: 1rem 0;
    margin-top: 14em;
    margin-left: 5em;
    font-size: 18px;
}
.authors{
    text-align: center;
    position: absolute;
    font-family: 'Poppins', sans-serif;
    font-weight: 400;
    color: white;
    width: 85%;
    margin: 1rem 0;
    margin-top: 17em;
    margin-left: 5em;
    font-size: 13;
    font-weight: 500;
    
}
.date{
    text-align: center;
    position: absolute;
    font-family: 'Poppins', sans-serif;
    font-weight:lighter;
    color: white;
    width: 85%;
    margin: 1rem 0;
    margin-top: 18.5em;
    margin-left: 5em;
    font-size: 11;
    
}
.scroll_title{
    text-align: center;
    position: absolute;
    font-family: 'Poppins', sans-serif;
    font-weight:600;
    color: white;
    width: 85%;
    margin: 1rem 0;
    margin-top: 26em;
    margin-left: 4.7em;
    font-size: 9;
    
}
.text-h2 font-secondary mb-3{
  position: absolute;
  text-align: center;
  margin-left: 4.7em;
  font-size: 9
}


.scroll-down {
  height: 50px;
  width: 30px;
  border: 2px solid white;
  position: absolute;
  left: 98%;
  bottom: -220px;
  border-radius: 50px;
  cursor: pointer;
}
.scroll-down::before,
.scroll-down::after {
  content: "";
  position: absolute;
  top: 20%;
  left: 50%;
  height: 10px;
  width: 10px;
  transform: translate(-50%, -100%) rotate(45deg);
  border: 2px solid white;
  border-top: transparent;
  border-left: transparent;
  animation: scroll-down 1s ease-in-out infinite;
}
.scroll-down::before {
  top: 30%;
  animation-delay: 0.3s;
  /* animation: scroll-down 1s ease-in-out infinite; */
}
.webgl{
  display: block;
}

@keyframes scroll-down {
  0% {
    /* top:20%; */
    opacity: 0;
  }
  30% {
    opacity: 1;
  }
  60% {
    opacity: 1;
  }
  100% {
    top: 90%;
    opacity: 0;
  }
}

    
  </style>
</head>
  <body>
    
    <div id="prova">
        <div class="title-container">
            <!--Introduction-->
            <div class="title">
                <h1>New frontiers of Space</h1>
                <strong><h3>Lorem ipsum dolor sit amet, consectetur adipiscing elit. </h3></strong>
                <p class="authors"> by Francisco, Khatia, Abhishek, Jacopo</p>
                <p class="date">12 May 2022</p>
                <p class="scroll_title">Scroll</p>
                
                <p class="subtitle"></p>
                <!--scroll-down button-->
                <div class="scroll-container">
                  <a href="#wrapper">
                    <div class="scroll-down" id="show1"></div>
                  </a>
                </div>
            </div>
        </div>
        <canvas class="webgl"></canvas> 
        <!--Earth's rotation-->
    <hr class="line-divider my-5 py-lg-2" />  
    <div class="wrapper">
      <div class="container py-5">
        <div class="row justify-content-center">
          <div class="col-lg-7 col-11">
            <!--<h1 class="text-body-2 mb-5">Title here</h1>

            <img src="space-junk1.jpg" alt="placeholder" width=100% class="mb-5 py-2" />          

            <h3 class="text-h2 font-secondary mb-3">subtitle here</h3>  

            <!--<div class="flourish-embed flourish-chart mt-3" data-src="visualisation/9816068"> 
            </div>
            <p class="text-caption mb-5 text-center">caption: here is a flourish chart and I basically plonked this in here exactly like how I get from the embed instructions</p> -->           

            <p class="text-body-1 mb-4">On March 18 last year, Chinese satellite Yunhai 1-02 began mysteriously falling to pieces. At that time, it was unclear whether it was some sort of failure, or the satellite had collided with something in orbit, but soon scientists confirmed that the cause of the issue was a piece of space debris, saying that we might be entering a new era of increasingly frequent space collisions.  </p>
            <p class="text-body-1 mb-4">
              In 1957, when the Soviet Union launched Sputnik 1, the first artificial satellite no one could have imagined that satellites would become one of the primary sources of space junk, endangering not just other satellites, human-crewed spacecraft, and the International Space Station, but also people on earth.  
            </p> 
            <p class="text-body-1 mb-4">
              The space industry is worth almost half a trillion dollars today, and this number is estimated to triple by the end of this decade. This growth is mainly due to the services that satellites offer, not only in the field of communication or defence but also in the emerging tourism market.
            </p> 

            <img src="texture/map.png" alt="placeholder" width=100% class="mb-5 py-2" />

            

            <p class="text-body-1 mb-4">
              For Robert Massey, an astronomer at the Royal Astronomical Society, the danger is that the growing number of satellites may bring more harm than good, increasing the number of space debris. There are an estimated 130 million pieces of floating space junk orbiting close to earth.Without a removal project, "they could irreparably compromise space sustainability," says Massey. 
            </p> 
            <hr class="line-divider my-5 py-lg-2" />

            <p class="blockquote font-secondary ">
              “They could irreparably compromise space sustainability”
            </p>

            <hr class="line-divider my-5 py-lg-2" />           

            <!--<p class="text-body-1 mb-5">
              Lorem ipsum dolor sit amet consectetur adipisicing elit. Ullam architecto obcaecati alias delectus, illo non nam ad, accusamus magnam <em>italics here</em> <a href="" target="_blank">random link here</a> ipsa accusantium ratione praesentium dolores nesciunt ab officia quisquam excepturi sunt?
            </p> -->
            

            <!--<img src="space-junk.jpg" alt="placeholder" width=100% class="mb-5 py-2" />

            <h3 class="text-h2 font-secondary mb-3">subtitle here</h3> -->

            <!--<p class="text-body-1 mb-4">
              Lorem, ipsum dolor sit amet consectetur adipisicing elit. Error dolor, quos aut repellendus quia porro temporibus magni unde, rerum quasi aperiam, eligendi ducimus aliquam fugiat quas autem labore id consectetur.
            </p>   -->      
          </div>
        </div>
      </div>
      <hr class="line-divider my-5 py-lg-2" />
      <div class="container-fluid" id="root">
        <div class="row justify-content-center" id="scrolly__section">
          <div class="col-4 scrolly__content">
            <div class="step" data-step="1">
              <div class="text-block pa-2">
                <!--<p class="text-body-2" style="font-size: 32px; font-weight: 600;">What are space debris?</p><br>-->
                <p style="font-size: 20px; font-weight: 500;">Since the late 1950s, humans have sent more than 12,000 satellites into Earth's orbit. The number of satellite launches has substantially increased during the last two years as Elon Musk's SpaceX, and other companies rush to grab space.</p>
              </div>
            </div>
            <div class="step" data-step="2">
              <div class="text-block pa-2">
                <p class="text-body-2"></p>
                <p class="text-body-2" style="font-size: 20px; font-weight: 500;">Simply put, when two satellites collide, they smash into thousands of new pieces, called space junk, also known as space debris—some space junk results from blowing up satellites. </p>
              </div>            
            </div>
            <div class="step" data-step="3">
              <div class="text-block pa-2">
                <p class="text-body-2"></p>
                <p class="text-body-2" style="font-size: 20px; font-weight: 500;">Estimates suggest that the total mass of all space objects in Earth's orbit is around 10 000 tonnes. </p>
              </div>            
            </div>
            <div class="step" data-step="4">
              <div class="text-block pa-2">
                <p class="text-body-2"></p>
                <p class="text-body-2" style="font-size: 20px; font-weight: 500;">There are a million objects around the size of a tennis ball, and another 130 million smaller than that. </p>
              </div>            
            </div>
          </div>

          <div class="col-6 scrolly__chart">
            <iframe scrolling="no" src="https://flo.uri.sh/story/1497712/embed#slide-0"></iframe>
          </div>
        </div>        
      </div>

      <!--<div>static paragraph</div> 



    </div>

    <div class="wrapper">
      <div class="container py-5">
        <div class="row justify-content-center">
          <div class="col-lg-7 col-11">
            <p class="text-body-2 mb-5">
              Lorem ipsum dolor sit amet consectetur adipisicing elit. Reprehenderit dolorem iusto, vel, cum est architecto odit quia culpa sed ex ipsa praesentium alias ullam tempore numquam aliquid aspernatur, provident nesciunt!
            </p>

            <img src="space-photo.jpg" alt="placeholder" width=100% class="mb-5 py-2" />          

            <h3 class="text-h2 font-secondary mb-3">Text here</h3>  

          </div>
          </div>
          </div>
          </div>-->

          <!--<div id = "chart-area3">
            <p class="headline2">Space junks move around the earth at 10 times the speed of a bullet</p>
            <p class="headline2">This circle moves at the speed of a bullet from left to right</p> -->
      
         
        <div class="wrapper">
              <div class="container py-5">
                <div class="row justify-content-center">
                  <div class="col-lg-7 col-11">
                    <!--<h1 class="text-body-2 mb-5">Title here</h1>
        
                    <img src="space-junk1.jpg" alt="placeholder" width=100% class="mb-5 py-2" />          
        
                    <h3 class="text-h2 font-secondary mb-3">subtitle here</h3>  
        
                    <!--<div class="flourish-embed flourish-chart mt-3" data-src="visualisation/9816068"> 
                    </div>
                    <p class="text-caption mb-5 text-center">caption: here is a flourish chart and I basically plonked this in here exactly like how I get from the embed instructions</p> -->           
        
                    <img src="texture/9,800tons-2.png" alt="placeholder" width=100% class="mb-5 py-2" />
                    <p class="text-body-1 mb-4">
                      Only about 30,000 of these are tracked by space surveillance networks and a fragment of the debris can disable or destroy spacecraft and satellite. If debris is in the way, the crew must calculate the risk of a collision. Sometimes it’s necessary to carry out a costly manoeuvre or even take shelter in a space capsule.  </p>
                      
                      <p class="text-body-1 mb-4">
                        Manoeuvres to avoid debris are becoming more frequent and will make future space tourism or travel much more difficult, if not impossible. According to the European Space Agency, spacecrafts have to conduct special maneuvers about once every two weeks in the case of ESA’s 20 satellites. </p>
        
                    <hr class="line-divider my-5 py-lg-2" />
        
                    <p class="blockquote font-secondary ">
                      “Space debris could damage or worsen the services we use.”
                    </p>
        
                    <hr class="line-divider my-5 py-lg-2" />           
        
                    <!-- To insert link and italics
                      <p class="text-body-1 mb-5">
                      Lorem ipsum dolor sit amet consectetur adipisicing elit. Ullam architecto obcaecati alias delectus, illo non nam ad, accusamus magnam <em>italics here</em> <a href="" target="_blank">random link here</a> ipsa accusantium ratione praesentium dolores nesciunt ab officia quisquam excepturi sunt?
                    </p> -->
                    <p class="text-body-1 mb-4">Things will only worsen in the next few years as private space companies and governmental space agencies launch up to 66,000 satellites for space-based broadband services alone. 
                      Hugh Lewis runs the Astronautic Research Group at the University of Southampton and has been involved in work on space debris modelling for years. He says that it’s hard to paint an accurate picture based on modelling, but it helps develop different scenarios and understand what and why things are happening. According to one of the scenarios, people will feel the effect of the space debris problem in their everyday life.
                      </p>
                    <img src="texture/countries.png" alt="placeholder" width=100% class="mb-5 py-2" />
        
                    <!--<img src="space-junk.jpg" alt="placeholder" width=100% class="mb-5 py-2" />
        
                    <h3 class="text-h2 font-secondary mb-3">subtitle here</h3> -->
        
                    <p class="text-body-1 mb-4">
                      “Various satellites provide important services. You know, the situation in Ukraine, Starlink provides internet access. If that service disappears, then we could never resolve problems, as we've seen in Ukraine and elsewhere, we'd have to find a different solution, which might be more expensive,” says Lewis.</p>       
                      <img src="texture/Tough_Love.gif" alt="placeholder" width=100% class="mb-5 py-2" />
                    <p class="text-body-1 mb-4">We now rely on satellites in ways we never did in the past. “Tractors don’t have drivers”, he says,  “they harvest crops by themselves because they rely upon satellites to provide them with their information”. Your smartphone relies on GPS, but “if GPS satellite conducts a manoeuvre to avoid a collision, then we might have degradation in the quality of the position,” he says.</p>
                    <p class="text-body-1 mb-4">John Crassidis, who works with NASA, the US Air Force and other agencies to monitor space debris, says we will feel the full force of Kessler syndrome in the next 50 years. “If we don't do anything in the next 50 years, we will get a Kessler syndrome. We don't want to think 50 years ahead, as there are other problems in the world”, he says. “When I give a presentation to junior and senior high students, I tell them they will have to solve this problem”.  </p>
                  </div>
                </div>
              </div>
              <hr class="line-divider my-5 py-lg-2" />
              <div class="container-fluid" id="root">
                <div class="row justify-content-center" id="scrolly__section">
                <div class="col-4 scrolly__content">
                <div class="step" data-step="1">
                <div class="text-block pa-2">
                <!--<p class="text-body-2" style="font-size: 32px; font-weight: 600;">What are space debris?</p><br>-->
                <p style="font-size: 20px; font-weight: 500;">The UK’s space agency is now investing cleaning up this junk that floats around space. With the Royal Air Force it has set up a surveillance service which will predict potential collisions between satellites and space debris. </p>
                </div>
                </div>
                <div class="step" data-step="2">
                <div class="text-block pa-2">
                
                <p class="text-body-2" style="font-size: 20px; font-weight: 500;">In the last two years, it has provided just over £5 million to private space companies and academia to develop surveillance and debris removal technology. Still, these projects may not see the light of day until 2025.</p>
                </div>            
                </div>
                <div class="step" data-step="3">
                <div class="text-block pa-2">
                
                <p class="text-body-2" style="font-size: 20px; font-weight: 500;">A comparison with other governments’ spending is sobering. While NASA is launching the £24m new project, India and Japan are tackling the problem of space waste through ambitious monitoring programmes costing £20m and £18m, respectively. Apart from money, there are technological challenges. </p>
                </div>            
                </div>
                <!--<div class="step" data-step="4">
                <div class="text-block pa-2">
                
                
                </div>            
                </div> -->
                </div>
                <div class="col-6 scrolly__chart">
                <iframe scrolling="no" src="https://flo.uri.sh/story/1497712/embed#slide-1"></iframe>
                </div>
                </div>        
                </div>
                </div>
                </div>
                </div>
                <hr class="line-divider my-5 py-lg-2" />  
                <div class="wrapper">
                  <div class="container py-5">
                    <div class="row justify-content-center">
                      <div class="col-lg-7 col-11">
                        <!--<h1 class="text-body-2 mb-5">Title here</h1>
            
                        <img src="space-junk1.jpg" alt="placeholder" width=100% class="mb-5 py-2" />          
            
                        <h3 class="text-h2 font-secondary mb-3">subtitle here</h3>  
            
                        <!--<div class="flourish-embed flourish-chart mt-3" data-src="visualisation/9816068"> 
                        </div>
                        <p class="text-caption mb-5 text-center">caption: here is a flourish chart and I basically plonked this in here exactly like how I get from the embed instructions</p> -->           
            
                        <p class="text-body-1 mb-4">Some experts believe the UK's plans for space are too ambitious, especially with errors discovered in the national space strategy document. “There are several schoolboy errors in the main documents”, says Alan Smith, who has been involved in rocket and satellite programmes for almost 30 years. “We read in the UK space strategy summary that the satellites orbiting our heads are 160 kilometres away. But there are no satellites 160 kilometres above our head. Whoever wrote that knows nothing about space. And it's the opening paragraph in the executive summary”.</p>
                        <p class="text-body-1 mb-4">
                          Smith is convinced that the UK space agency hasn't yet got the technical capability to deliver its strategy. “They've started to create posts like a programme manager for science programmes and things like that, where they look like they're moving towards a technical capability”, he says, “but they're a long way short of what they need if they're going to oversee prime contractors and major programmes”.
                        </p> 
                        <hr class="line-divider my-5 py-lg-2" />
            
                        <p class="blockquote font-secondary ">
                          “They could irreparably compromise space sustainability”
                        </p>
            
                        <hr class="line-divider my-5 py-lg-2" /> 
                                                  
                        <p class="text-body-1 mb-4">
                          It’s not enough just to clean up junk in space. Companies and governments have to show they can remove a lot of junk.“We don't want to spend multiple millions of dollars, maybe to get just a few pieces of space, says John Crassidis, “it's just not cost effective right now”.</p>
                       

              


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
    <script type="module" src="./index.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/d3@5.9.1/dist/d3.min.js"></script>
    <script src="https://unpkg.com/intersection-observer"></script>
    <script src="https://unpkg.com/scrollama"></script>    
    <script src="https://public.flourish.studio/resources/embed.js"></script>
    

    <!-- This code from here on is derived from the side-by-side code example from the scrollama library which can be found here: https://github.com/russellgoldenberg/scrollama  -->
    <!-- I tweaked the function for handleStepEnter to accomodate the Flourish story! -->

    <script>
      var scrolly = d3.selectAll("#scrolly__section");
      var chart = scrolly.selectAll(".scrolly__chart");
      var content = scrolly.selectAll(".scrolly__content");
      var step = content.selectAll(".step");
    
      // initialize the scrollama
      var scroller = scrollama();
    
      // generic window resize listener event
      function handleResize() {
        // 1. update height of step elements
        var stepH = Math.floor(window.innerHeight * 1);
        step.style("height", stepH + "px");
    
        var figureHeight = window.innerHeight * 0.75;
        var figureMarginTop = (window.innerHeight - figureHeight) / 2;
    
        chart
          .style("height", figureHeight + "px")
          .style("top", figureMarginTop + "px");
    
        // 3. tell scrollama to update new element dimensions
        scroller.resize();
      }
    
      // scrollama event handlers
      function handleStepEnter(response) {
        const textblock = step.selectAll(".text-block");

        // add color to current step only
        textblock.classed("is-active", function(d, i) {
          return i === response.index;
        });
    
        // update graphic based on step
        const linkHead = 'https://flo.uri.sh/story/1497712/embed#slide-' //1485195 1497712 1457332
        const slide = response.index

        d3.selectAll('.scrolly__chart iframe')
          .attr('src', linkHead + slide);
      }
    
      function setupStickyfill() {
        d3.selectAll(".sticky").each(function() {
          Stickyfill.add(this);
        });
      }
    
      function init() {
        setupStickyfill();
        handleResize();
        scroller
          .setup({
            step: "#scrolly__section .scrolly__content .step",
            offset: 0.7,
            // debug: true
          })
          .onStepEnter(handleStepEnter);
    
        // setup resize event
        window.addEventListener("resize", handleResize);
      }
    
      init();


      var svg = d3.select("#chart-area3")
        .append("svg")
        .attr("width", 960)
        .attr("height", 500);

function circleTransition() { 

    var timeCircle = svg.append("circle")
        .attr("fill", "darkred")
        .attr("r", 30);
    repeat();
    
    function repeat() {
      timeCircle
        .attr('cx', 40)     
        .attr('cy', 250)     
        .transition()        
        .duration(350)      
        .attr('cx', 700)   
        .transition()       
        .duration(4000)   
        .attr('cx', 40)     
        .on("end", repeat);  
    };

};

circleTransition();
    </script>    
  </body>
</html>
